<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>Connexion â€“ CarpÃ‰nergie</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700;900&family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body {
      min-height:100vh;
      background: linear-gradient(rgba(0,22,36,0.93),rgba(9,40,44,0.92)),
        url('https://images.unsplash.com/photo-1464983953574-0892a716854b?auto=format&fit=crop&w=1500&q=80') center/cover fixed no-repeat;
      display: flex; align-items: center; justify-content: center;
      font-family: 'Roboto', Arial, sans-serif;
      color: #fff;
    }
    nav {
      width: 100vw;
      z-index: 30;
      position: fixed;
      top: 0; left: 0;
      display: flex;
      justify-content: center;
      background: rgba(20,44,37, 0.38);
      box-shadow: 0 4px 40px #00ffe7a6, 0 1px 0px #0ff;
      backdrop-filter: blur(7px);
      border-bottom: 2px solid #0ff;
    }
    nav ul {
      display: flex;
      gap: 2.2rem;
      list-style: none;
      margin: 0.45em 0;
      padding: 0;
      align-items: center;
    }
    nav a {
      color: #0ff;
      font-family: 'Orbitron', 'Roboto', sans-serif;
      font-size: 1.09rem;
      font-weight: 700;
      text-decoration: none;
      padding: 0.8em 1.4em;
      border-radius: 12px;
      letter-spacing: 2.1px;
      transition: background 0.16s, color 0.16s, box-shadow 0.19s;
      box-shadow: 0 0 0 transparent;
    }
    nav a:hover {
      background: rgba(0,255,255,0.12);
      color: #fff;
      box-shadow: 0 0 22px #0ffb, 0 2px 15px #0ff5;
      border: 1.3px solid #0ff;
    }
    .cart-count {
      position: absolute;
      top: 8px;
      right: -17px;
      background: #0ff;
      color: #033;
      border-radius: 50%;
      padding: 2px 7px;
      font-size: 0.9rem;
      font-family: 'Orbitron', sans-serif;
      font-weight: bold;
      box-shadow: 0 0 7px #00fff7, 0 0 3px #fff;
    }
    .login-box {
      background: rgba(19,33,44,0.92);
      border-radius: 17px;
      box-shadow: 0 0 44px #0ff8, 0 2px 44px #09ffe9;
      padding: 2.7rem 2.1rem 2.2rem 2.1rem;
      min-width: 350px;
      display: flex; flex-direction: column; align-items: center;
      margin-top: 70px;
    }
    .tab-switch {
      display: flex; width: 100%; justify-content: center; gap: 18px; margin-bottom: 1.5rem;
    }
    .tab-btn {
      font-family: 'Orbitron', Arial, sans-serif;
      background: none; border: none;
      color: #0ff; font-size: 1.17rem; font-weight: bold; letter-spacing: 2px;
      cursor: pointer;
      padding: 5px 20px; border-radius: 10px;
      box-shadow: 0 0 0 #0ff0;
      transition: color 0.16s, background 0.14s, box-shadow 0.15s;
    }
    .tab-btn.active, .tab-btn:focus {
      background: #0ff1;
      color: #fff;
      box-shadow: 0 0 13px #0ffb;
      outline: none;
    }
    .login-title {
      font-family: 'Orbitron', Arial, sans-serif;
      font-size: 2.2rem;
      color: #0ff;
      letter-spacing: 2px;
      margin-bottom: 1rem;
      font-weight: 900;
      text-shadow: 0 0 16px #0ffb, 0 0 4px #fff;
      text-align: center;
    }
    .login-box label {
      font-size: 1.02rem;
      color: #fff;
      font-weight: 600;
      margin-bottom: 0.3em;
      margin-top: 1.1em;
      letter-spacing: 0.7px;
      font-family: 'Orbitron', Arial, sans-serif;
    }
    .login-box input[type="text"], .login-box input[type="password"], .login-box input[type="email"] {
      width: 100%;
      padding: 0.85rem;
      margin-bottom: 0.5rem;
      border: 1.5px solid #0ff;
      border-radius: 6px;
      background: #172731;
      color: #fff;
      font-size: 1.07rem;
      font-family: 'Roboto', Arial, sans-serif;
      box-shadow: 0 0 8px #0ff3;
      transition: border-color 0.16s;
      outline: none;
    }
    .login-box input:focus {
      border-color: #fff;
    }
    .login-box button {
      width: 100%;
      padding: 1rem 0;
      margin-top: 1.2rem;
      font-size: 1.17rem;
      font-family: 'Orbitron', Arial, sans-serif;
      font-weight: 800;
      background: #0ff;
      color: #112;
      border: none;
      border-radius: 9px;
      letter-spacing: 1.5px;
      box-shadow: 0 0 13px #0ffb;
      cursor: pointer;
      transition: background 0.18s, color 0.18s, box-shadow 0.2s;
      text-shadow: 0 0 2px #fff7;
    }
    .login-box button:hover {
      background: #fff;
      color: #088;
      box-shadow: 0 0 28px #0ffb;
    }
    .login-error, .register-error, .forgot-msg {
      color: #ff6a8c;
      font-size: 1.01rem;
      text-align: center;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
      min-height: 1.3em;
      font-family: 'Orbitron', Arial, sans-serif;
      text-shadow: 0 0 6px #fff7;
    }
    .forgot-link {
      display: block;
      margin: 0.8em 0 0.2em 0;
      color: #7ffcff;
      font-size: 0.99em;
      font-family: 'Orbitron', Arial, sans-serif;
      text-align: right;
      text-decoration: underline;
      cursor: pointer;
      transition: color 0.2s;
    }
    .forgot-link:hover {
      color: #fff;
      text-shadow: 0 0 8px #0ff7;
    }
    /* Modal */
    .modal-backdrop {
      display: none; position: fixed; inset: 0; z-index: 200;
      background: rgba(0,0,0,0.7); align-items: center; justify-content: center;
    }
    .modal {
      background: #1e3647;
      color: #0ff;
      padding: 2.1rem 1.5rem;
      border-radius: 13px;
      text-align: center;
      font-family: 'Roboto', Arial, sans-serif;
      min-width: 300px;
      max-width: 95vw;
      box-shadow: 0 0 24px #0ff9;
      position: relative;
      animation: fadeIn .21s;
    }
    @keyframes fadeIn {
      from { transform: scale(0.85); opacity: 0;}
      to   { transform: scale(1); opacity: 1;}
    }
    .modal input[type="email"] {
      margin-top: 1.1em;
      width: 94%;
      padding: 0.75em;
    }
    .modal button {
      margin-top: 1.5em;
      padding: 0.7em 2em;
      font-size: 1rem;
      border-radius: 8px;
      border: none;
      font-family: 'Orbitron', Arial, sans-serif;
      background: #0ff;
      color: #111;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 0 13px #0ffb;
      transition: background 0.18s, color 0.18s, box-shadow 0.2s;
    }
    .modal button:hover { background: #fff; color: #099;}
    .close-modal {
      position: absolute; right: 12px; top: 10px; font-size: 1.8em; color: #0ff; background: none; border: none; cursor: pointer;
    }
    /* Responsive */
    @media (max-width: 540px) {
      .login-box { min-width: 94vw; padding: 2.1rem 0.2rem;}
      .login-title { font-size: 1.3rem;}
    }
  </style>
</head>
<body>
  <nav>
    <ul>
      <li><a href="#">Accueil</a></li>
      <li><a href="produits.html">Produits</a></li>
      <li><a href="contact.html">Contact</a></li>
      <li style="position:relative;">
        <a href="cart.html" id="cart-btn">Panier ðŸ›’<span class="cart-count" id="cart-count">0</span></a>
      </li>
      <li style="margin-left: 1.5rem;">
        <a href="login.html" id="login-btn" style="background:#0ff; color:#102; border-radius:9px; font-weight:900; box-shadow:0 0 7px #0ff, 0 0 14px #0ff7; padding:0.8em 1.2em;">Connexion</a>
      </li>
    </ul>
  </nav>
  <form class="login-box" id="login-form" autocomplete="off">
    <div class="tab-switch">
      <button type="button" class="tab-btn active" id="tab-login">Connexion</button>
      <button type="button" class="tab-btn" id="tab-register">CrÃ©er un compte</button>
    </div>
    <div class="login-title" id="form-title">Connexion</div>
    <div class="login-error" id="login-error"></div>
    <div id="login-fields">
      <label for="login-user">Utilisateur</label>
      <input type="text" id="login-user" autocomplete="off" autofocus>
      <label for="login-pass">Mot de passe</label>
      <input type="password" id="login-pass">
      <span class="forgot-link" id="show-forgot">Mot de passe oubliÃ©&nbsp;?</span>
      <button type="submit">Se connecter</button>
    </div>
    <div id="register-fields" style="display:none;">
      <label for="register-user">Nom d'utilisateur</label>
      <input type="text" id="register-user" autocomplete="off">
      <label for="register-email">Email</label>
      <input type="email" id="register-email" autocomplete="off">
      <label for="register-pass">Mot de passe</label>
      <input type="password" id="register-pass">
      <button type="button" id="register-btn">CrÃ©er un compte</button>
      <div class="register-error" id="register-error"></div>
    </div>
  </form>

  <!-- Modal "Mot de passe oubliÃ©" -->
  <div class="modal-backdrop" id="forgot-modal">
    <div class="modal">
      <button class="close-modal" onclick="document.getElementById('forgot-modal').style.display='none'">&times;</button>
      <div style="font-size:1.23rem; margin-bottom:1.1em;">RÃ©initialisation du mot de passe</div>
      <div class="forgot-msg" id="forgot-msg"></div>
      <input type="email" id="forgot-email" placeholder="Votre adresse email" required>
      <button onclick="submitForgot()">Envoyer</button>
    </div>
  </div>
  <script>
    // Tab switch Connexion/Inscription
    const tabLogin = document.getElementById('tab-login');
    const tabRegister = document.getElementById('tab-register');
    const loginFields = document.getElementById('login-fields');
    const registerFields = document.getElementById('register-fields');
    const formTitle = document.getElementById('form-title');
    tabLogin.onclick = () => {
      tabLogin.classList.add('active');
      tabRegister.classList.remove('active');
      loginFields.style.display = '';
      registerFields.style.display = 'none';
      formTitle.textContent = 'Connexion';
    };
    tabRegister.onclick = () => {
      tabRegister.classList.add('active');
      tabLogin.classList.remove('active');
      loginFields.style.display = 'none';
      registerFields.style.display = '';
      formTitle.textContent = 'CrÃ©er un compte';
    };

    // "Mot de passe oubliÃ©"
    document.getElementById('show-forgot').onclick = function() {
      document.getElementById('forgot-modal').style.display = 'flex';
      document.getElementById('forgot-msg').textContent = '';
      document.getElementById('forgot-email').value = '';
    };
    function submitForgot() {
      var email = document.getElementById('forgot-email').value.trim();
      var msg = document.getElementById('forgot-msg');
      if(!email || !/^[^@]+@[^@]+\.[^@]+$/.test(email)){
        msg.textContent = "Merci d'entrer une adresse email valide.";
        return;
      }
      msg.style.color = "#1bffc1";
      msg.textContent = "Si cet email est enregistrÃ©, vous recevrez un lien de rÃ©initialisation (dÃ©mo).";
      setTimeout(function(){
        document.getElementById('forgot-modal').style.display = 'none';
      }, 2100);
    }

    // DÃ©mo crÃ©ation de compte
    document.getElementById('register-btn').onclick = function() {
      let user = document.getElementById('register-user').value.trim();
      let mail = document.getElementById('register-email').value.trim();
      let pass = document.getElementById('register-pass').value;
      let err = document.getElementById('register-error');
      if(user.length < 3) { err.textContent = "Nom d'utilisateur trop court."; return;}
      if(!/^[^@]+@[^@]+\.[^@]+$/.test(mail)) { err.textContent = "Email invalide."; return;}
      if(pass.length < 5) { err.textContent = "Mot de passe trop court (5 caractÃ¨res min)."; return;}
      // (DÃ©mo) Enregistre en localStorage
      localStorage.setItem('user', user);
      localStorage.setItem('email', mail);
      err.style.color = "#1bffc1";
      err.textContent = "Compte crÃ©Ã©Â ! Vous pouvez maintenant vous connecter.";
      setTimeout(()=>{
        tabLogin.onclick();
        err.textContent = "";
      }, 2000);
    };

    // Connexion (demo : admin/demo123 OU le compte crÃ©Ã©)
    document.getElementById('login-form').onsubmit = function(e){
      e.preventDefault();
      const demoUser = "admin", demoPass = "demo123";
      const user = document.getElementById('login-user').value.trim();
      const pass = document.getElementById('login-pass').value;
      const error = document.getElementById('login-error');
      const storedUser = localStorage.getItem('user');
      const storedPass = localStorage.getItem('pass'); // non sÃ©curisÃ© (dÃ©mo)
      if((user === demoUser && pass === demoPass) || user === storedUser){
        localStorage.setItem('user', user);
        window.location.href = "index.html";
      } else {
        error.textContent = "Identifiant ou mot de passe incorrect";
      }
    };

    // Affiche le nombre d'articles dans le panier
    let cart = JSON.parse(localStorage.getItem('cart')||'[]');
    document.getElementById('cart-count').textContent = cart.length || 0;
  </script>
</body>
</html>
